<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>Julia在win10环境的安装和解微分方程的例子</title><meta name="description" content="peachRL's Blog"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="万亿及秭" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-mobile"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">peachRL's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Julia在win10环境的安装和解微分方程的例子</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3></aside></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Julia%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">Julia的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Julia%E5%AE%98%E7%BD%91%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-text">Julia官网下载安装包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8vscode%E4%B8%AD%E5%AE%89%E8%A3%85Julia%E6%8F%92%E4%BB%B6"><span class="toc-text">在vscode中安装Julia插件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%89%A9%E5%B1%95%E5%8C%85"><span class="toc-text">安装扩展包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85General-%E6%B3%A8%E5%86%8C%E8%A1%A8"><span class="toc-text">安装General 注册表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85DifferentialEquations%E6%89%A9%E5%B1%95%E5%8C%85"><span class="toc-text">安装DifferentialEquations扩展包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85DiffEqFlux%E6%89%A9%E5%B1%95%E5%8C%85"><span class="toc-text">安装DiffEqFlux扩展包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Julia%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">Julia的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Julia%E8%A7%A3Lotka-Volterra%E6%96%B9%E7%A8%8B%E7%BB%84"><span class="toc-text">Julia解Lotka-Volterra方程组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Julia%E8%A7%A3-Lorenz%E6%96%B9%E7%A8%8B%E7%BB%84"><span class="toc-text">Julia解 Lorenz方程组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Julia%E8%A7%A3%E4%BA%8C%E9%98%B6%E5%B8%B8%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B"><span class="toc-text">Julia解二阶常微分方程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Julia%E8%A7%A3Henon-Heiles%E6%96%B9%E7%A8%8B%E7%BB%84"><span class="toc-text">Julia解Hénon_Heiles方程组</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Julia"><i class="tag post-item-tag">Julia</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Julia在win10环境的安装和解微分方程的例子</h1><time class="has-text-grey" datetime="2020-07-21T12:28:10.000Z">2020-07-21</time><article class="mt-2 post-content"><h2 id="Julia的安装"><a href="#Julia的安装" class="headerlink" title="Julia的安装"></a>Julia的安装</h2><blockquote>
<p>Julia 语言扮演了这样一个角色：它是一门灵活的动态语言，适合用于科学计算和数值计算，并且性能可与传统的静态类型语言媲美。</p>
</blockquote>
<a id="more"></a>

<h3 id="Julia官网下载安装包"><a href="#Julia官网下载安装包" class="headerlink" title="Julia官网下载安装包"></a>Julia官网下载安装包</h3><ol>
<li><p><a target="_blank" rel="noopener" href="https://julialang.org/downloads/">https://julialang.org/downloads/</a></p>
</li>
<li><p>将安装路径加入path</p>
</li>
</ol>
<h3 id="在vscode中安装Julia插件"><a href="#在vscode中安装Julia插件" class="headerlink" title="在vscode中安装Julia插件"></a>在vscode中安装Julia插件</h3><ol>
<li><p><a target="_blank" rel="noopener" href="https://code.visualstudio.com/download">https://code.visualstudio.com/download</a></p>
</li>
<li><p>如果插件没有自动找到Julia的位置而报错，到设置里Julia: Executable Path输入安装路径，要详细到\\bin\\julia.exe。（\用\\）</p>
</li>
</ol>
<h2 id="安装扩展包"><a href="#安装扩展包" class="headerlink" title="安装扩展包"></a>安装扩展包</h2><h3 id="安装General-注册表"><a href="#安装General-注册表" class="headerlink" title="安装General 注册表"></a>安装General 注册表</h3><ol>
<li>安装了注册表才能安装General 注册表中记录的扩展包</li>
<li>打开julia.exe（或者在vscode中按F1,输入Julia: start REPL），按]，出现<code>(@v1.4) pkg&gt;</code></li>
<li>输入<code>registry add https://mirrors.bfsu.edu.cn/git/julia-general.git</code>（这是使用的BFSU北外镜像站安装，比从原始地址(Github)安装和更新要快一些）</li>
<li>安装完成<img src="https://pic.downk.cc/item/5f170a6714195aa594f1c043.png" alt="image-20200720235009760"></li>
<li>General 的更新会走对应的镜像，而其他数据的下载则通过官方服务器(Pkg server：<a target="_blank" rel="noopener" href="https://pkg.julialang.org/">https://pkg.julialang.org</a>)</li>
</ol>
<h3 id="安装DifferentialEquations扩展包"><a href="#安装DifferentialEquations扩展包" class="headerlink" title="安装DifferentialEquations扩展包"></a>安装DifferentialEquations扩展包</h3><ol>
<li>DifferentialEquations.jl是个解微分方程的扩展包：<a target="_blank" rel="noopener" href="https://diffeq.sciml.ai/dev/">https://diffeq.sciml.ai/dev/</a></li>
<li>输入<code>add DifferentialEquations</code></li>
<li>安装<img src="https://pic.downk.cc/item/5f170a6714195aa594f1c049.png" alt="image-20200721102807619"></li>
<li>安装完成<img src="https://pic.downk.cc/item/5f170a6714195aa594f1c04d.png" alt="image-20200721102933940"></li>
</ol>
<h3 id="安装DiffEqFlux扩展包"><a href="#安装DiffEqFlux扩展包" class="headerlink" title="安装DiffEqFlux扩展包"></a>安装DiffEqFlux扩展包</h3><ol>
<li>DiffEqFlux.jl也是个解微分方程的扩展包：<a target="_blank" rel="noopener" href="https://diffeqflux.sciml.ai/dev/">https://diffeqflux.sciml.ai/dev/</a></li>
<li>输入<code>add DuffEqFlux</code></li>
<li>安装<img src="https://pic.downk.cc/item/5f170a6714195aa594f1c045.png" alt="image-20200720235749070"></li>
<li>很长..很久之后…</li>
<li>安装完成<img src="https://pic.downk.cc/item/5f170a6714195aa594f1c047.png" alt="image-20200721100926196"></li>
</ol>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>如果跑代码的时候还报错说缺啥就补啥，总之扩展包都是在pkg模式下用<code>add …</code>，如果不小心断网又重装，可能导致没完全装好，用<code>build …</code></p>
<h2 id="Julia的使用"><a href="#Julia的使用" class="headerlink" title="Julia的使用"></a>Julia的使用</h2><h3 id="Julia解Lotka-Volterra方程组"><a href="#Julia解Lotka-Volterra方程组" class="headerlink" title="Julia解Lotka-Volterra方程组"></a>Julia解Lotka-Volterra方程组</h3><p>$$<br>\frac{d x}{d t}=\alpha x-\beta x y<br>$$</p>
<p>$$<br>\frac{d y}{d t}=-\delta y+\gamma x y<br>$$</p>
<p>文件Lotka-Volterra.jl：</p>
<pre><code class="julia">using DifferentialEquations, Flux, Optim, DiffEqFlux, DiffEqSensitivity

function lotka_volterra!(du, u, p, t)
  x, y = u
  α, β, δ, γ = p
  du[1] = dx = α*x - β*x*y
  du[2] = dy = -δ*y + γ*x*y
end

# Initial condition
u0 = [1.0, 1.0]

# Simulation interval and intermediary points
tspan = (0.0, 10.0)
tsteps = 0.0:0.1:10.0

# LV equation parameter. p = [α, β, δ, γ]
p = [1.5, 1.0, 3.0, 1.0]

# Setup the ODE problem, then solve
prob_ode = ODEProblem(lotka_volterra!, u0, tspan, p)
sol_ode = solve(prob_ode, Tsit5())

# Plot the solution
using Plots
plot(sol_ode)
savefig("LV_ode.svg")
</code></pre>
<p>可以在vscode或者cmd中输入<code>julia Lotka-Volterra</code>，或者在julia REPL中输入julia&gt; <code>include("Lotka-Volterra.jl")</code>。</p>
<p><img src="https://pics.images.ac.cn/image/5f170ff5072f6.html" alt="LV_ode"></p>
<h3 id="Julia解-Lorenz方程组"><a href="#Julia解-Lorenz方程组" class="headerlink" title="Julia解 Lorenz方程组"></a>Julia解 Lorenz方程组</h3><p>$$<br>\frac{d x}{d t}=\sigma(y-x)<br>$$</p>
<p>$$<br>\frac{d y}{d t}=x(\rho-z)-y<br>$$</p>
<p>$$<br>\frac{d z}{d t}=x y-\beta z<br>$$</p>
<p>文件Lorenz2.jl：</p>
<pre><code class="julia">using DifferentialEquations, Plots
function parameterized_lorenz!(du,u,p,t)
    x,y,z = u
    σ,ρ,β = p
    du[1] = dx = σ*(y-x)
    du[2] = dy = x*(ρ-z) - y
    du[3] = dz = x*y - β*z
end

u0 = [1.0,0.0,0.0]
tspan = (0.0,100.0)
p = [10.0,28.0,8/3]
prob = ODEProblem(parameterized_lorenz!,u0,tspan,p)
sol = solve(prob)

plot(sol,vars=(1,2,3))
savefig("L2_ode.svg")
</code></pre>
<p>可以在vscode或者cmd中输入<code>julia Lorenz2</code>，或者在julia REPL中输入julia&gt; <code>include("Lorenz2.jl")</code>。</p>
<p>运行环境为笔记本电脑，win10专业版，64位，CPU: Intel(R) Core(TM) i7-6700HQ CPU @ 2.60GHz，8核，RAM 8G，Julia Version 1.4.2，运行时长大约110s左右。</p>
<pre><code class="powershell">[Running] julia "e:\Julia\Lorenz2.jl"

[Done] exited with code=0 in 114.155 seconds
</code></pre>
<p><img src="https://pic.downk.cc/item/5f170ed814195aa594f3304b.png" alt="L2_ode"></p>
<h3 id="Julia解二阶常微分方程"><a href="#Julia解二阶常微分方程" class="headerlink" title="Julia解二阶常微分方程"></a>Julia解二阶常微分方程</h3><p>$$<br>\ddot{\theta}+\frac{g}{L} \sin (\theta)=0<br>$$</p>
<pre><code class="julia"># Simple Pendulum Problem
using OrdinaryDiffEq, Plots

#Constants
const g = 9.81
L = 1.0

#Initial Conditions
u₀ = [0,π/2]
tspan = (0.0,6.3)

#Define the problem
function simplependulum(du,u,p,t)
    θ = u[1]
    dθ = u[2]
    du[1] = dθ
    du[2] = -(g/L)*sin(θ)
end

#Pass to solvers
prob = ODEProblem(simplependulum, u₀, tspan)
sol = solve(prob,Tsit5())

#Plot
plot(sol,linewidth=2,title ="Simple Pendulum Problem", xaxis = "Time", yaxis = "Height", label = ["\\theta" "d\\theta"])
savefig("2nd-Order.svg")

p = plot(sol,vars = (1,2), xlims = (-9,9), title = "Phase Space Plot", xaxis = "Velocity", yaxis = "Position", leg=false)
function phase_plot(prob, u0, p, tspan=2pi)
    _prob = ODEProblem(prob.f,u0,(0.0,tspan))
    sol = solve(_prob,Vern9()) # Use Vern9 solver for higher accuracy
    plot!(p,sol,vars = (1,2), xlims = nothing, ylims = nothing)
end
for i in -4pi:pi/2:4π
    for j in -4pi:pi/2:4π
        phase_plot(prob, [j,i], p)
    end
end
plot(p,xlims = (-9,9))
savefig("2nd-Order2.svg")
</code></pre>
<pre><code class="powershell">[Running] julia "e:\Julia\2nd-Order.jl"

[Done] exited with code=0 in 84.122 seconds
</code></pre>
<p><img src="https://pic.downk.cc/item/5f170ed814195aa594f3303c.png" alt="2nd-Order"></p>
<p><img src="https://pic.downk.cc/item/5f170ed814195aa594f3303f.png" alt="2nd-Order2"></p>
<h3 id="Julia解Henon-Heiles方程组"><a href="#Julia解Henon-Heiles方程组" class="headerlink" title="Julia解Hénon_Heiles方程组"></a>Julia解Hénon_Heiles方程组</h3><p>$$<br>\frac{d^{2} x}{d t^{2}}=-\frac{\partial V}{\partial x}<br>$$</p>
<p>$$<br>\frac{d^{2} y}{d t^{2}}=-\frac{\partial V}{\partial y}<br>$$</p>
<p>其中<br>$$<br>V(x, y)=\frac{1}{2}\left(x^{2}+y^{2}+2 x^{2} y-\frac{2}{3} y^{3}\right)<br>$$</p>
<pre><code class="julia">using OrdinaryDiffEq, Plots

#Setup
initial = [0.,0.1,0.5,0]
tspan = (0,100.)

#Remember, V is the potential of the system and T is the Total Kinetic Energy, thus E will
#the total energy of the system.
V(x,y) = 1//2 * (x^2 + y^2 + 2x^2*y - 2//3 * y^3)

#Define the function
function Hénon_Heiles(du,u,p,t)
    x  = u[1]
    y  = u[2]
    dx = u[3]
    dy = u[4]
    du[1] = dx
    du[2] = dy
    du[3] = -x - 2x*y
    du[4] = y^2 - y -x^2
end

#Pass to solvers
prob = ODEProblem(Hénon_Heiles, initial, tspan)
sol = solve(prob, Vern9(), abs_tol=1e-16, rel_tol=1e-16);

# Plot the orbit
plot(sol, vars=(1,2), title = "The orbit of the Hénon-Heiles system", xaxis = "x", yaxis = "y", leg=false)
savefig("HH_ode.svg")
</code></pre>
<pre><code class="powershell">[Running] julia "e:\Julia\Hénon-Heiles.jl"

[Done] exited with code=0 in 68.487 seconds
</code></pre>
<p><img src="https://pic.downk.cc/item/5f170ed814195aa594f33045.png" alt="HH_ode"></p>
<p>以上例子出自：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://diffeq.sciml.ai/dev/">https://diffeq.sciml.ai/dev/</a></li>
<li><a target="_blank" rel="noopener" href="https://diffeqflux.sciml.ai/dev/">https://diffeqflux.sciml.ai/dev/</a></li>
<li><a target="_blank" rel="noopener" href="https://tutorials.sciml.ai/html/models/01-classical_physics.html">https://tutorials.sciml.ai/html/models/01-classical_physics.html</a></li>
</ul>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2020/10/10/%E7%94%A8shell%E8%84%9A%E6%9C%AC%E5%81%9A%E8%AE%A1%E7%AE%97/" title="用shell脚本做计算"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: 用shell脚本做计算</span></a><a class="button is-default" href="/2020/06/28/LAMMPS%E4%B8%AD%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8KIM%EF%BC%88Knowledgebase%20of%20Interatomic%20Models%EF%BC%89/" title="LAMMPS中安装和使用KIM（Knowledgebase of Interatomic Models）"><span class="has-text-weight-semibold">下一页: LAMMPS中安装和使用KIM（Knowledgebase of Interatomic Models）</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="peachrl/peachrl.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/https://github.com/peachrl"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> peachRL 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>